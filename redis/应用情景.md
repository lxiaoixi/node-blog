# Redis 应用情景

## 统计每个网页每天的访问次数PV

解决方案：
> 给每个网页设置一个redis计数器，每来一次请求，就incrby 一次，每个key后缀加上当天的日期

## 统计每个网页每天的访问次数UV ,即同一个用户多次访问只算一次
每一个网页请求都需要带上用户的 ID，无论是登陆用户还是未登陆用户都需要一个唯一 ID 来标识。
解决方案：

> 方案一：每个网页设置的key为set类型，每来一个访问就将用户的ID塞到set中进行去重，最后set集合的大小即为访问的次数。<br>
方案二：使用Redis的 HyperLogLog 数据结构实现不精确的去重计数， HyperLogLog只会根据输入元素来计算基数，而不会储存输入元素本身。可以很大的节省存储空间。<br>
比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素)为5。Redis 之存储基数5，而不存储基数集。<br>
 HyperLogLog 提供了两个指令pfadd 和 pfcount，一个是增加计数，一个是获取计数。
